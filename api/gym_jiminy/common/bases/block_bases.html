

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Block &mdash; jiminy 1.6.21 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Pipeline" href="pipeline_bases.html" />
    <link rel="prev" title="Generic" href="generic_bases.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> jiminy
          

          
            
            <img src="../../../../_static/jiminy_logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.6.21
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">README</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../README.html">Key features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../README.html#gym-jiminy">Gym Jiminy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../README.html#demo">Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../README.html#getting-started">Getting started</a></li>
</ul>
<p class="caption"><span class="caption-text">INSTALLATION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../INSTALL.html">Linux-based OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../INSTALL.html#windows-os">Windows OS</a></li>
</ul>
<p class="caption"><span class="caption-text">TUTORIALS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial.html">An introduction to Jiminy</a></li>
</ul>
<p class="caption"><span class="caption-text">API DOC</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../jiminy/index.html">Jiminy C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jiminy_py/index.html">Jiminy Python API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Gym Jiminy API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Bases</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="generic_bases.html">Generic</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Block</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipeline_bases.html">Pipeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../envs/index.html">Envs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/index.html">Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wrappers/index.html">Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html">Utils</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Technical Specifications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../spec/src/tlmc_format_specification.html"><code class="docutils literal notranslate"><span class="pre">tlmc</span></code> Version 1 format specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../spec/pdf/index.html">Downloadable PDF</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">jiminy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Gym Jiminy API</a> &raquo;</li>
        
          <li><a href="index.html">Bases</a> &raquo;</li>
        
      <li>Block</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/api/gym_jiminy/common/bases/block_bases.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-gym_jiminy.common.bases.block_bases">
<span id="block"></span><h1>Block<a class="headerlink" href="#module-gym_jiminy.common.bases.block_bases" title="Permalink to this headline">¶</a></h1>
<p>This method gathers base implementations for blocks to be used in pipeline
control design.</p>
<p>It implements:</p>
<blockquote>
<div><ul class="simple">
<li><p>the concept of block that can be connected to a <cite>BaseJiminyEnv</cite>
environment through any level of indirection</p></li>
<li><p>the base controller block</p></li>
<li><p>the base observer block</p></li>
</ul>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BlockInterface">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">gym_jiminy.common.bases.block_bases.</span></span><span class="sig-name descname"><span class="pre">BlockInterface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BlockInterface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BlockInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for blocks used for pipeline control design.</p>
<p>Block can be either observers and controllers. A block can be connected to
any number of subsequent blocks, or directly to a <cite>BaseJiminyEnv</cite>
environment.</p>
<p>Initialize the block interface.</p>
<p>It only allocates some attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> (<a class="reference internal" href="../envs/env_generic.html#gym_jiminy.common.envs.env_generic.BaseJiminyEnv" title="gym_jiminy.common.envs.env_generic.BaseJiminyEnv"><em>gym_jiminy.common.envs.env_generic.BaseJiminyEnv</em></a>) – Environment to ultimately control, ie completely unwrapped.</p></li>
<li><p><strong>update_ratio</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Ratio between the update period of the high-level
controller and the one of the subsequent
lower-level controller.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – Extra keyword arguments that may be useful for mixing
multiple inheritance through multiple inheritance.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BlockInterface.observation_space">
<span class="sig-name descname"><span class="pre">observation_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">gym.spaces.space.Space</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BlockInterface.observation_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BlockInterface.action_space">
<span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">gym.spaces.space.Space</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BlockInterface.action_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BlockInterface._setup">
<span class="sig-name descname"><span class="pre">_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BlockInterface._setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BlockInterface._setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the internal state of the block.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The environment itself is not necessarily directly connected to
this block since it may actually be connected through another block
instead.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to update the configuration of the simulator, for
example to register some extra variables to monitor the internal
state of the block.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BlockInterface._refresh_observation_space">
<span class="sig-name descname"><span class="pre">_refresh_observation_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BlockInterface._refresh_observation_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BlockInterface._refresh_observation_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the observation of the block.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The observation space refers to the output of system once connected
with another block. For example, for a controller, it is the
action from the next block.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BlockInterface._refresh_action_space">
<span class="sig-name descname"><span class="pre">_refresh_action_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BlockInterface._refresh_action_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BlockInterface._refresh_action_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the action of the block.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The action space refers to the input of the block. It does not have
to be an actual action. For example, for an observer, it is the
observation from the previous block.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">gym_jiminy.common.bases.block_bases.</span></span><span class="sig-name descname"><span class="pre">BaseObserverBlock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BaseObserverBlock"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.ObserverInterface" title="gym_jiminy.common.bases.generic_bases.ObserverInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">gym_jiminy.common.bases.generic_bases.ObserverInterface</span></code></a>, <a class="reference internal" href="#gym_jiminy.common.bases.block_bases.BlockInterface" title="gym_jiminy.common.bases.block_bases.BlockInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">gym_jiminy.common.bases.block_bases.BlockInterface</span></code></a></p>
<p>Base class to implement observe that can be used compute observation
features of a <cite>BaseJiminyEnv</cite> environment, through any number of
lower-level observer.</p>
<a class="reference internal image-reference" href="../../../../_images/aafig-ae381d46b67db0cd87084c43666b3f08cf0ca8f8.svg"><img alt="../../../../_images/aafig-ae381d46b67db0cd87084c43666b3f08cf0ca8f8.svg" height="76.0" src="../../../../_images/aafig-ae381d46b67db0cd87084c43666b3f08cf0ca8f8.svg" width="496.0" /></a>
<p>Formally, an observer is a defined as a block mapping the observation space
of the preceding observer, if any, and directly the one of the environment
‘obs_env’, to any observation space ‘features’. It is more generic than
estimating the state of the robot.</p>
<p>The update period of the observer is the same than the simulation timestep
of the environment for now.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kwargs</strong> (<em>Any</em>) – Extra keyword arguments that may be useful for dervied
observer with multiple inheritance, and to allow
automatic pipeline wrapper generation.</p></li>
<li><p><strong>args</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock._refresh_action_space">
<span class="sig-name descname"><span class="pre">_refresh_action_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BaseObserverBlock._refresh_action_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock._refresh_action_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the action space of the observer.</p>
<p>It does nothing but to return the action space of the environment
since it is only affecting the observation space.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method that must not be overloaded. If one need to overload
it, then using <cite>BaseControllerBlock</cite> or <cite>BlockInterface</cite> directly
is probably the way to go.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock._setup">
<span class="sig-name descname"><span class="pre">_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BaseObserverBlock._setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock._setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the internal state of the block.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The environment itself is not necessarily directly connected to
this block since it may actually be connected through another block
instead.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to update the configuration of the simulator, for
example to register some extra variables to monitor the internal
state of the block.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock.refresh_observation">
<span class="sig-name descname"><span class="pre">refresh_observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">measure</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BaseObserverBlock.refresh_observation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock.refresh_observation" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute observed features based on the current simulation state and
lower-level measure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>measure</strong> (<em>Union</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>SpaceDictNested</em><em>]</em><em>, </em><em>numpy.ndarray</em><em>]</em><em>]</em><em>, </em><em>numpy.ndarray</em><em>]</em>) – Measure from the environment to process to get
high-level observation.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock._refresh_observation_space">
<span class="sig-name descname"><span class="pre">_refresh_observation_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock._refresh_observation_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the observation space.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock.get_observation">
<span class="sig-name descname"><span class="pre">get_observation</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock.get_observation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get post-processed observation.</p>
<p>By default, it does not perform any post-processing. One is responsible
for clipping the observation if necessary to make sure it does not
violate the lower and upper bounds. This can be done either by
overloading this method, or in the case of pipeline design, by adding a
clipping observation block at the very end.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In most cases, it is not necessary to overloaded this method, and
doing so may lead to unexpected behavior if not done carefully.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, Union[Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, SpaceDictNested], numpy.ndarray]], numpy.ndarray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock.observe_dt">
<span class="sig-name descname"><span class="pre">observe_dt</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock.observe_dt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock.observation_space">
<span class="sig-name descname"><span class="pre">observation_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">gym.spaces.space.Space</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock.observation_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock._observation">
<span class="sig-name descname"><span class="pre">_observation</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">SpaceDictNested</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock._observation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseObserverBlock.action_space">
<span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">gym.spaces.space.Space</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseObserverBlock.action_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">gym_jiminy.common.bases.block_bases.</span></span><span class="sig-name descname"><span class="pre">BaseControllerBlock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BaseControllerBlock"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.ControllerInterface" title="gym_jiminy.common.bases.generic_bases.ControllerInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">gym_jiminy.common.bases.generic_bases.ControllerInterface</span></code></a>, <a class="reference internal" href="#gym_jiminy.common.bases.block_bases.BlockInterface" title="gym_jiminy.common.bases.block_bases.BlockInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">gym_jiminy.common.bases.block_bases.BlockInterface</span></code></a></p>
<p>Base class to implement controller that can be used compute targets to
apply to the robot of a <cite>BaseJiminyEnv</cite> environment, through any number of
lower-level controllers.</p>
<a class="reference internal image-reference" href="../../../../_images/aafig-506950d67946aa370f719ef7a824bb8f823f16ab.svg"><img alt="../../../../_images/aafig-506950d67946aa370f719ef7a824bb8f823f16ab.svg" height="76.0" src="../../../../_images/aafig-506950d67946aa370f719ef7a824bb8f823f16ab.svg" width="622.0" /></a>
<p>Formally, a controller is defined as a block mapping any action space
‘act_ctrl’ to the action space of the subsequent controller ‘cmd_ctrl’,
if any, and ultimately to the one of the associated environment ‘act_env’,
ie the motors efforts to apply on the robot.</p>
<p>The update period of the controller must be higher than the control update
period of the environment, but both can be infinite, ie time-continuous.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The space in which the command must be contained is completely
determined by the action space of the next block (another
controller or the environment to ultimately control). Thus, it does
not have to be defined explicitely.</p>
<p>On the contrary, the action space of the controller ‘action_ctrl’
is free and it is up to the user to define it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>) – Extra arguments that may be useful for mixing multiple
inheritance through multiple inheritance, and to allow
automatic pipeline wrapper generation.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – Extra keyword arguments. See ‘args’.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock._refresh_observation_space">
<span class="sig-name descname"><span class="pre">_refresh_observation_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BaseControllerBlock._refresh_observation_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock._refresh_observation_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the observation space of the controller.</p>
<p>It does nothing but to return the observation space of the environment
since it is only affecting the action space.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method that must not be overloaded. If one need to overload
it, then using <cite>BaseObserverBlock</cite> or <cite>BlockInterface</cite> directly
is probably the way to go.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock._refresh_action_space">
<span class="sig-name descname"><span class="pre">_refresh_action_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock._refresh_action_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the action space of the controller.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is called right after <cite>_setup</cite>, so that both the
environment to control and the controller itself should be already
initialized.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock._setup">
<span class="sig-name descname"><span class="pre">_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BaseControllerBlock._setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock._setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the controller.</p>
<p>It includes:</p>
<blockquote>
<div><ul class="simple">
<li><p>refreshing the action space of the controller</p></li>
<li><p>allocating memory of the controller’s internal state and
initializing it</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the environment to ultimately control <cite>env</cite> has already
been fully initialized at this point, so that each of its internal
buffers is up-to-date, but the simulation is not running yet. As a
result, it is still possible to update the configuration of the
simulator, and for example, to register some extra variables to
monitor the internal state of the controller.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock.compute_command">
<span class="sig-name descname"><span class="pre">compute_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">measure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock.compute_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the action to perform by the subsequent block, namely a
lower-level controller, if any, or the environment to ultimately
control, based on a given high-level action.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The controller is supposed to be already fully configured whenever
this method might be called. Thus it can only be called manually
after <cite>reset</cite>.  This method has to deal with the initialization of
the internal state, but <cite>_setup</cite> method does so.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>measure</strong> (<em>Union</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>SpaceDictNested</em><em>]</em><em>, </em><em>numpy.ndarray</em><em>]</em><em>]</em><em>, </em><em>numpy.ndarray</em><em>]</em>) – Observation of the environment.</p></li>
<li><p><strong>action</strong> (<em>Union</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>SpaceDictNested</em><em>]</em><em>, </em><em>numpy.ndarray</em><em>]</em><em>]</em><em>, </em><em>numpy.ndarray</em><em>]</em>) – Target to achieve.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Action to perform</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, Union[Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, SpaceDictNested], numpy.ndarray]], numpy.ndarray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock.compute_reward">
<span class="sig-name descname"><span class="pre">compute_reward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock.compute_reward" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute reward at current episode state.</p>
<p>See <cite>ControllerInterface.compute_reward</cite> for details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is called after updating the internal buffer
‘_num_steps_beyond_done’, which is None if the simulation is not done,
0 right after, and so on.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>) – Extra arguments that may be useful for derived environments,
for example <cite>Gym.GoalEnv</cite>.</p></li>
<li><p><strong>info</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – Dictionary of extra information for monitoring.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – Extra keyword arguments. See ‘args’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Total reward.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock.compute_reward_terminal">
<span class="sig-name descname"><span class="pre">compute_reward_terminal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock.compute_reward_terminal" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute terminal reward at current episode final state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Implementation is optional. Not computing terminal reward if not
overloaded by the user for the sake of efficiency.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Similarly to <cite>compute_reward</cite>, ‘info’ can be updated by reference
to log extra info for monitoring.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>info</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – Dictionary of extra information for monitoring.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Terminal reward.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock.control_dt">
<span class="sig-name descname"><span class="pre">control_dt</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock.control_dt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock.action_space">
<span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">gym.spaces.space.Space</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock.action_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock._action">
<span class="sig-name descname"><span class="pre">_action</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">SpaceDictNested</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock._action" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock.observation_space">
<span class="sig-name descname"><span class="pre">observation_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">gym.spaces.space.Space</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock.observation_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.block_bases.BaseControllerBlock.get_fieldnames">
<span class="sig-name descname"><span class="pre">get_fieldnames</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/block_bases.html#BaseControllerBlock.get_fieldnames"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.block_bases.BaseControllerBlock.get_fieldnames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get mapping between each scalar element of the action space of the
controller and the associated fieldname for logging.</p>
<p>It is expected to return an object with the same structure than the
action space, the difference being numerical arrays replaced by lists
of string.</p>
<p>By default, generic fieldnames using ‘Action’ prefix and index as
suffix for <cite>np.ndarray</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is not supposed to be called before <cite>reset</cite>, so that
the controller should be already initialized at this point.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, FieldDictNested], List[Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, ListStrRecursive]]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="pipeline_bases.html" class="btn btn-neutral float-right" title="Pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="generic_bases.html" class="btn btn-neutral float-left" title="Generic" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Alexis Duburcq - MIT licence.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>